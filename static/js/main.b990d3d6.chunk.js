(this["webpackJsonptot-chat"]=this["webpackJsonptot-chat"]||[]).push([[0],{13:function(e,t,a){e.exports={list:"UserList_list__2cFfZ",online:"UserList_online__c3tSj",user:"UserList_user__3pZ39"}},2:function(e,t,a){e.exports={chatWrapper:"Chat_chatWrapper__2l3OG",chatLogWrapper:"Chat_chatLogWrapper__1F6pp",chatLog:"Chat_chatLog__aoI48",greetings:"Chat_greetings__zZ3m4",messageWrapper:"Chat_messageWrapper__3GqJj",message:"Chat_message__3s4-l",messageNickname:"Chat_messageNickname__3qpAM",editMode:"Chat_editMode__3jxmr",delete:"Chat_delete__14oXm",edit:"Chat_edit__118vp",formWrapper:"Chat_formWrapper__19_qo",inputForm:"Chat_inputForm__9pctt",editModal:"Chat_editModal__1sYCs"}},20:function(e,t,a){e.exports=a(34)},25:function(e,t,a){},26:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(10),s=a.n(c),o=(a(25),a(3)),u=(a(26),a(13)),i=a.n(u),l=function(e){var t=e.users,a=e.setTarget,r=t.map((function(e,t){return n.a.createElement("div",{onClick:function(){return a(e.login.username)},key:t,className:i.a.user},n.a.createElement("img",{src:e.picture.thumbnail,alt:"#"}),e.login.username)}));return n.a.createElement("div",{className:i.a.list},n.a.createElement("div",{className:i.a.online},"Online: "),r)},m=a(12),p=a(1),d=a.n(p),h=a(5),f=a(9),g=a(4),b=function(){return fetch("https://randomuser.me/api/?results=10").then((function(e){return e.json()}))},k={authorization:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("TOT-chat-auth",JSON.stringify(t)),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAuthorization:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("TOT-chat-auth");case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",{res:t,auth:!0});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.removeItem("TOT-chat-auth");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},v="usersReducer/SET_USERS",y={users:[]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(g.a)({},e,{users:Object(f.a)(t.users)});default:return e}},E=a(2),O=a.n(E),C=function(e){var t=e.target,a=e.submit,c=e.placeholder,s=Object(r.useState)(""),u=Object(o.a)(s,2),i=u[0],l=u[1];Object(r.useEffect)((function(){t&&l(t)}),[t,l]);return n.a.createElement("form",{className:O.a.inputForm},n.a.createElement("input",{type:"text",value:i,onChange:function(e){return t=e.target.value,l(t);var t},onKeyPress:function(e){return function(e,t){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),a(t),l(""))}(e,i)},placeholder:c}),n.a.createElement("button",{type:"button",className:O.a.submit,onClick:function(e){a(i),l("")}},"submit"))},j=function(e){var t=e.i,a=e.indx,c=e.deleteMessage,s=e.editMessage,u=e.auth,i=e.chat,l=e.type,m=Object(r.useState)(!1),p=Object(o.a)(m,2),d=p[0],h=p[1],f=Object(r.useState)(!1),g=Object(o.a)(f,2),b=g[0],k=g[1],v=Object(r.useState)(""),y=Object(o.a)(v,2),_=y[0],E=y[1],j=Object(r.useState)(""),N=Object(o.a)(j,2),A=N[0],w=N[1];return n.a.createElement("div",{style:t.nickname===u.myNick?{boxShadow:"0px 0px 8px ".concat(u.myColor)}:void 0,className:O.a.messageWrapper,key:a,onClick:function(){return h(!d)}},n.a.createElement("div",{style:{color:t.color},className:O.a.messageNickname},t.nickname,":"),n.a.createElement("div",{className:O.a.message},t.message,b&&t.nickname===u.myNick&&n.a.createElement("div",{className:O.a.editModal},n.a.createElement(C,{setText:E,target:i.target,placeholder:A,text:_,submit:function(e){0!==function(e){return e.trim()}(e).length?(s(a,l,e,u.myNick,u.myColor),k(!b),E("")):(E(""),w("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435."))}}))),d&&t.nickname===u.myNick&&n.a.createElement("div",{className:O.a.editMode},n.a.createElement("div",{className:O.a.edit,onClick:function(){k(!b)}},"edit"),n.a.createElement("div",{className:O.a.delete,onClick:function(){return c(a,l)}},"delete")))},N=function(e){var t=Object(r.useState)(!0),a=Object(o.a)(t,2),c=a[0],s=a[1],u=Object(r.useState)(""),i=Object(o.a)(u,2),l=i[0],m=i[1],p=e.chat,d=e.type,h=e.auth,f=e.sendWorkMessage,g=e.sendFloodMessage,b=Object(r.useRef)([]);Object(r.useEffect)((function(){b.current.scrollTop=99999}));Object(r.useEffect)((function(){setTimeout((function(){return s(!1)}),6e3)}),[]);var k=p.workChat.map((function(t,a){return n.a.createElement(j,Object.assign({key:a,i:t,indx:a},e))})),v=p.floodChat.map((function(t,a){return n.a.createElement(j,Object.assign({key:a,i:t,indx:a},e))}));return n.a.createElement("div",{className:O.a.chatWrapper},n.a.createElement("div",{className:O.a.chatLogWrapper},n.a.createElement("div",{className:O.a.chatLog,ref:b},"work"===d?k:v),c&&n.a.createElement("div",{className:O.a.greetings},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0447\u0430\u0442!")),n.a.createElement("div",{className:O.a.formWrapper},n.a.createElement(C,{target:p.target,placeholder:l,submit:function(e){0!==function(e){return e.trim()}(e).length?"work"===d?f(e,h.myNick,h.myColor):"flood"===d&&g(e,h.myNick,h.myColor):m("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435.")}})))},A="chatReducer/SEND_WORK",w="chatReducer/SEND_FLOOD",x="chatReducer/TARGET",T="chatReducer/DELETE",F="chatReducer/EDIT",W={workChat:[{nickname:"Artem",message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Risus pretium quam vulputate dignissim suspendisse in est. Aliquet nec ullamcorper sit amet risus. Vel eros donec ac odio",color:"#A12312"},{nickname:"named",message:"empor orci dapibus. Nec tincidunt praesent semper feugiat nibh sed pulvinar. Massa id neque aliquam vestibulum morbi blandit cursus. In est ante in nibh",color:"#4CBB17"},{nickname:"Baron1212",message:"molestie. Dictumst quisque sagittis purus sit amet volutpat.",color:"#9EE788"},{nickname:"AWF",message:"met consectetu",color:"#F594B9"}],floodChat:[{nickname:"FISH",message:" risus. Vel eros donec ac odio tempor orci dapibus. Nec tincidunt praes",color:"#A12312"},{nickname:"_vagner",message:"piscing elit",color:"#337AB7"},{nickname:"Dima",message:"cursus mattis",color:"#B2A5F3"},{nickname:"Artem",message:"ahaha",color:"#A12312"},{nickname:"Artem",message:"sed do",color:"#A12312"},{nickname:"AWF",message:"lol :D",color:"#F594B9"},{nickname:"AWF",message:"molestie. Dictumst :)",color:"#F594B9"},{nickname:"AWF",message:"qwerty123",color:"#F594B9"}],target:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:if(""!==t.msg){var a={nickname:t.myNick,message:t.msg,color:t.myColor};return Object(g.a)({},e,{workChat:[].concat(Object(f.a)(e.workChat),[a])})}return e;case w:if(""!==t.msg){var r={nickname:t.myNick,message:t.msg,color:t.myColor};return Object(g.a)({},e,{floodChat:[].concat(Object(f.a)(e.floodChat),[r])})}return e;case x:return Object(g.a)({},e,{target:"@".concat(t.target)});case T:if("work"===t.chatType){var n=e.workChat.splice(t.target,1);return Object(g.a)({},e,{newWorkChat:n})}if("flood"===t.chatType){var c=e.floodChat.splice(t.target,1);return Object(g.a)({},e,{newFloodChat:c})}return e;case F:if("work"===t.chatType){var s={nickname:t.myNick,message:t.msg,color:t.myColor},o=e.workChat.splice(t.target,1,s);return Object(g.a)({},e,{msg:o})}if("flood"===t.chatType){var u={nickname:t.myNick,message:t.msg,color:t.myColor},i=e.floodChat.splice(t.target,1,u);return Object(g.a)({},e,{msg:i})}return e;default:return e}},S=a(6),R=a.n(S),B=function(e){var t=Object(r.useState)("unnamed"),a=Object(o.a)(t,2),c=a[0],s=a[1],u=Object(r.useState)("#F594B9"),i=Object(o.a)(u,2),l=i[0],m=i[1],p=e.auth,d=e.setAuthorization,h=p.colors.map((function(e,t){return l===e?n.a.createElement("div",{style:{backgroundColor:e,width:"40px",height:"40px"},className:R.a.box,key:t}):n.a.createElement("div",{onClick:function(){m(e)},style:{backgroundColor:e},className:R.a.box,key:t})}));return n.a.createElement("div",{className:R.a.authWrapper},n.a.createElement("div",{className:R.a.nicknameAuth},n.a.createElement("span",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0438\u043a\u043d\u0435\u0439\u043c"),n.a.createElement("input",{onChange:function(e){return s(e.target.value)},type:"text",value:c})),n.a.createElement("div",{className:R.a.colorsetter},n.a.createElement("span",null,"\u0412\u044b\u0431\u0435\u0440\u0438 \u0446\u0432\u0435\u0442"),n.a.createElement("div",{className:R.a.colorbox},h)),n.a.createElement("button",{onClick:function(){var e,t;t=l,""===(e=c)?s("unnamed"):d({name:e,clr:t})},className:R.a.btn,type:"button"},"log in"))},L="authReducer/AUTH",z="authReducer/GET_AUTH",q={isAuth:!1,myNick:null,myColor:null,colors:["#4CBB17","#9EE788","#2D572C","#A12312","#E4766C","#73443F","#122FAA","#B2A5F3","#337AB7","#424242","#F594B9"]},D=function(e){return{type:L,data:e}},U=function(e){return{type:z,boolean:e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(g.a)({},e,{myNick:t.data.name,myColor:t.data.clr,isAuth:!0});case z:return Object(g.a)({},e,{isAuth:t.boolean});default:return e}},J=Object(m.b)((function(e){return{users:e.usersReducer.users,chat:e.chatReducer,auth:e.authReducer}}),{getUsersThunk:function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:a=e.sent,t((r=a.results,{type:v,users:r}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()},sendWorkMessage:function(e,t,a){return{type:A,msg:e,myNick:t,myColor:a}},sendFloodMessage:function(e,t,a){return{type:w,msg:e,myNick:t,myColor:a}},setAuthorization:function(e){return function(){var t=Object(h.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.authorization(e);case 2:r=t.sent,a(D(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getAuthorization:function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAuthorization();case 2:a=e.sent,t(a?D(JSON.parse(a.res)):U(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setTarget:function(e){return{type:x,target:e}},logoutThunk:function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.logout();case 2:t(U(!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteMessage:function(e,t){return{type:T,target:e,chatType:t}},editMessage:function(e,t,a,r,n){return{type:F,target:e,chatType:t,msg:a,myNick:r,myColor:n}}})((function(e){var t=Object(r.useState)("work"),a=Object(o.a)(t,2),c=a[0],s=a[1],u=e.getUsersThunk,i=e.auth,m=e.getAuthorization,p=e.setTarget,d=e.logoutThunk;Object(r.useEffect)((function(){!i.isAuth&&m()}),[m,i.isAuth]),Object(r.useEffect)((function(){i.isAuth&&u()}),[u,i.isAuth,c]);var h={backgroundColor:"#e7af69"};return i.isAuth?n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"logo"},n.a.createElement("h1",null,"logo")),n.a.createElement("div",{className:"categories"},n.a.createElement("span",{style:"work"===c?h:void 0,onClick:function(){s("work")}},"\u0420\u0430\u0431\u043e\u0442\u0430"),n.a.createElement("span",{style:"flood"===c?h:void 0,onClick:function(){s("flood")}},"\u0424\u043b\u0443\u0434\u0438\u043b\u043a\u0430"),n.a.createElement("span",{onClick:function(){d()},className:"logout"},"log out"))),n.a.createElement("div",{className:"body"},n.a.createElement(l,{users:e.users,setTarget:p}),n.a.createElement(N,{chat:e.chat,auth:i,type:c,sendWorkMessage:e.sendWorkMessage,sendFloodMessage:e.sendFloodMessage,deleteMessage:e.deleteMessage,editMessage:e.editMessage}))):n.a.createElement(B,{auth:i,setAuthorization:e.setAuthorization})})),G=a(7),H=a(19),K=Object(G.c)({usersReducer:_,chatReducer:M,authReducer:I}),V=Object(G.d)(K,Object(G.a)(H.a));window.store=V;var Z=V;s.a.render(n.a.createElement(m.a,{store:Z},n.a.createElement(J,null)),document.getElementById("root"))},6:function(e,t,a){e.exports={authWrapper:"Auth_authWrapper__3FrLz",nicknameAuth:"Auth_nicknameAuth__2904P",btn:"Auth_btn__28Kr8",colorsetter:"Auth_colorsetter__sJgpa",colorbox:"Auth_colorbox__3fQVH",box:"Auth_box__U0nON"}}},[[20,1,2]]]);
//# sourceMappingURL=main.b990d3d6.chunk.js.map